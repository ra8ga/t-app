{
  "name": "my-better-t-app",
  "private": true,
  "type": "module",
  "workspaces": {
    "packages": [
      "apps/*",
      "packages/*"
    ],
    "catalog": {
      "hono": "^4.8.2",
      "@orpc/server": "^1.10.0",
      "@orpc/openapi": "^1.10.0",
      "@orpc/zod": "^1.10.0",
      "better-auth": "^1.3.28",
      "dotenv": "^17.2.2",
      "zod": "^4.1.11",
      "typescript": "^5.8.2",
      "tsdown": "^0.15.5",
      "wrangler": "^4.40.3",
      "@types/node": "^22.13.11",
      "@orpc/client": "^1.10.0",
      "drizzle-orm": "^0.44.2"
    }
  },
  "scripts": {
    "dev": "turbo dev",
    "build": "turbo build",
    "check-types": "turbo check-types",
    "dev:native": "turbo -F native dev",
    "dev:web": "turbo -F web dev",
    "dev:server": "turbo -F server dev",
    "db:push": "turbo -F @my-better-t-app/db db:push",
    "db:studio": "turbo -F @my-better-t-app/db db:studio",
    "db:studio:local": "bash -lc 'cd packages/db && bun run db:studio:local'",
    "db:studio:remote": "bash -lc 'cd packages/db && bun run db:studio:remote'",
    "db:studio:local:port": "bash -lc 'cd packages/db && PORT=${PORT:-4984} bun run db:studio:local'",
    "db:studio:remote:port": "bash -lc 'cd packages/db && PORT=${PORT:-4985} bun run db:studio:remote'",
    "db:generate": "turbo -F @my-better-t-app/db db:generate",
    "db:migrate": "turbo -F @my-better-t-app/db db:migrate",
    "db:backup:remote": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --output=\"./backups/remote-${STAMP}.sql\"'",
    "db:backup:local": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --output=\"./backups/local-${STAMP}.sql\"'",
    "db:backup:full": "bash -lc 'TS=$(date +\"%d-%m-%Y_%H-%M\"); COMMIT=$(git rev-parse --short HEAD || echo unknown); STAMP=\"$TS-$COMMIT\"; mkdir -p \"./backups/$STAMP\"; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --output=\"./backups/$STAMP/remote.sql\" && npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --output=\"./backups/$STAMP/local.sql\"'",
    "db:restore:local": "bash -lc 'npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --file \"${FILE:?set FILE}\"'",
    "db:restore:remote": "bash -lc 'npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --file \"${FILE:?set FILE}\"'",
    "db:reset:local": "bash -lc 'rm -f ./apps/server/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/*.sqlite*'",
    "db:restore:local:latest": "bash -lc 'FILE=$(ls -t ./backups/local-*.sql | head -n 1); [ -n \"$FILE\" ] && npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --file \"$FILE\" || { echo no local backup found; exit 1; }'",
    "db:restore:remote:latest": "bash -lc 'FILE=$(ls -t ./backups/remote-*.sql | head -n 1); [ -n \"$FILE\" ] && npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --file \"$FILE\" || { echo no remote backup found; exit 1; }'",
    "db:cleanup:remote": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); TMP_SCHEMA=./backups/_schema-${STAMP}.sql; TMP_DROP=./backups/_drop-${STAMP}.sql; mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --remote --no-data --config ./apps/server/wrangler.jsonc --output \"$TMP_SCHEMA\"; node -e \"const fs=require('fs'); const s=fs.readFileSync(process.argv[1],'utf8'); const names=[...s.matchAll(/CREATE TABLE\\s+`([^`]+)`/g)].map(m=>m[1]).filter(n=>n!=='_cf_KV'); const out=['PRAGMA foreign_keys=OFF;','BEGIN;'].concat(names.map(n=>`DROP TABLE IF EXISTS \\\`${n}\\\`;`)).concat(['COMMIT;','PRAGMA foreign_keys=ON;']).join('\\n'); fs.writeFileSync(process.argv[2],out)\" \"$TMP_SCHEMA\" \"$TMP_DROP\"; npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --file \"$TMP_DROP\"'",
    "db:cleanup:local": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); TMP_SCHEMA=./backups/_schema-${STAMP}.sql; TMP_DROP=./backups/_drop-${STAMP}.sql; mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --no-data --config ./apps/server/wrangler.jsonc --output \"$TMP_SCHEMA\"; node -e \"const fs=require('fs'); const s=fs.readFileSync(process.argv[1],'utf8'); const names=[...s.matchAll(/CREATE TABLE\\s+`([^`]+)`/g)].map(m=>m[1]).filter(n=>n!=='_cf_KV'); const out=['PRAGMA foreign_keys=OFF;','BEGIN;'].concat(names.map(n=>`DROP TABLE IF EXISTS \\\`${n}\\\`;`)).concat(['COMMIT;','PRAGMA foreign_keys=ON;']).join('\\n'); fs.writeFileSync(process.argv[2],out)\" \"$TMP_SCHEMA\" \"$TMP_DROP\"; npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --file \"$TMP_DROP\"'",
    "db:clean-restore:remote:latest": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); TMP_SCHEMA=./backups/_schema-${STAMP}.sql; TMP_DROP=./backups/_drop-${STAMP}.sql; mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --remote --no-data --config ./apps/server/wrangler.jsonc --output \"$TMP_SCHEMA\"; node -e \"const fs=require('fs'); const s=fs.readFileSync(process.argv[1],'utf8'); const names=[...s.matchAll(/CREATE TABLE\\s+`([^`]+)`/g)].map(m=>m[1]).filter(n=>n!=='_cf_KV'); const out=['PRAGMA foreign_keys=OFF;','BEGIN;'].concat(names.map(n=>`DROP TABLE IF EXISTS \\\`${n}\\\`;`)).concat(['COMMIT;','PRAGMA foreign_keys=ON;']).join('\\n'); fs.writeFileSync(process.argv[2],out)\" \"$TMP_SCHEMA\" \"$TMP_DROP\"; npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --file \"$TMP_DROP\"; FILE=$(ls -t ./backups/remote-*.sql | head -n 1); [ -n \"$FILE\" ] && npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --remote --config ./apps/server/wrangler.jsonc --file \"$FILE\" || { echo no remote backup found; exit 1; }'",
    "db:clean-restore:local:latest": "bash -lc 'STAMP=$(date +\"%d-%m-%Y_%H-%M\")-$(git rev-parse --short HEAD || echo unknown); TMP_SCHEMA=./backups/_schema-${STAMP}.sql; TMP_DROP=./backups/_drop-${STAMP}.sql; mkdir -p ./backups; npx --yes wrangler@latest d1 export \"${D1_DB:?set D1_DB}\" --no-data --config ./apps/server/wrangler.jsonc --output \"$TMP_SCHEMA\"; node -e \"const fs=require('fs'); const s=fs.readFileSync(process.argv[1],'utf8'); const names=[...s.matchAll(/CREATE TABLE\\s+`([^`]+)`/g)].map(m=>m[1]).filter(n=>n!=='_cf_KV'); const out=['PRAGMA foreign_keys=OFF;','BEGIN;'].concat(names.map(n=>`DROP TABLE IF EXISTS \\\`${n}\\\`;`)).concat(['COMMIT;','PRAGMA foreign_keys=ON;']).join('\\n'); fs.writeFileSync(process.argv[2],out)\" \"$TMP_SCHEMA\" \"$TMP_DROP\"; npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --file \"$TMP_DROP\"; FILE=$(ls -t ./backups/local-*.sql | head -n 1); [ -n \"$FILE\" ] && npx --yes wrangler@latest d1 execute \"${D1_DB:?set D1_DB}\" --config ./apps/server/wrangler.jsonc --file \"$FILE\" || { echo no local backup found; exit 1; }'"
  },
  "dependencies": {
    "dotenv": "^17.2.2",
    "zod": "^4.1.11"
  },
  "devDependencies": {
    "turbo": "^2.5.4",
    "tsdown": "^0.15.5",
    "@types/node": "^22.13.11"
  },
  "packageManager": "bun@1.3.2"
}
